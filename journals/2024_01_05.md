- Started building the storage system had a issue where i was mapping table to repository but it should be aggregate to repository which means a repository could have multiple table under it which would mean a single repo could persist multiple related entities at once.
- Find a way to publish events in a durable way without dual writes on a [[NoSQL]] system without transactions because transactions are expensive on [[NoSQL]] systems.
	- A way to achieve this is to use the native but immitted transaction mechanisms built into [[NoSQL]] systems.
	- A approach is to embed the event in the aggregate object which doesn't scale well.
	- Another approach is to use event sourcing to build application state which to complex and hard to understand.
- According to my testing transaction on [[NoSQL]] systems like [[MongoDB]] and [[Apache Cassandra]] don't effect performance servilely if its only two entities in the transaction like the entity and event. Also keep transactions scoped to a single partition of data to increase performance this is applicable to [[NoSQL]] and [[SQL]] systems.
- We have come to the conclusion to use [[Transactional Outbox Pattern]] with micro batch processing for the storage service.